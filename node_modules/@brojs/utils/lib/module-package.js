import path from "node:path";
import { readFile } from "node:fs/promises"

const getCleanName = (name) => name.replace(/^@[-\w]+\//, "");

/**
 * 
 * @returns {{ packagePath: string, version: string, entryPoint: string, cleanName: string, other: object }}
 */
export const getModuleData = async () => {
  const packagePath = path.resolve("package");
  const pkg = JSON.parse(await readFile(`${packagePath}.json`));

  return {
    packagePath,
    version: pkg.version,
    entryPoint: pkg.main,
    cleanName: getCleanName(pkg.name),
    other: pkg
  };
};

import { getProjectConfig } from "@brojs/utils";

import developmentConfig from "./development.js";
import prodConfig from "./production.js";

if (!process.env.NODE_ENV) {
  process.env.NODE_ENV = "production";
}

if (!process.env.LOCALES) {
  process.env.LOCALES = "./locales";
}

const getWebpackConfig = async () =>
  process.env.NODE_ENV === "production"
    ? await prodConfig()
    : await developmentConfig();

(async () => {
  if (!process.env.ENTRY) {
    process.env.ENTRY = await getProjectConfig().entryPoint;
  }
})();

export default getWebpackConfig;